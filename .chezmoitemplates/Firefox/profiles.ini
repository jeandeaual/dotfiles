{{- /* Final profile paths for each installation version */ -}}
{{- $releasePath := joinPath .chezmoi.homeDir ".config" "firefox" "profiles" "default-release" -}}
{{- $nightlyPath := joinPath .chezmoi.homeDir ".config" "firefox" "profiles" "default-nightly" -}}

{{- /* IDs for each installation version */ -}}
{{- $releaseId := "0" -}}
{{- $nightlyId := "0" -}}
{{- if eq .chezmoi.os "windows" -}}
{{-   $releaseId = mozillaInstallHash (joinPath (env "ProgramFiles") "Mozilla Firefox") -}}
{{-   $nightlyId = mozillaInstallHash (joinPath (env "ProgramFiles") "Firefox Nightly") -}}
{{- else if eq .chezmoi.os "darwin" -}}
{{-   $releaseId = mozillaInstallHash (joinPath "/" "Applications" "Firefox.app" "Contents" "MacOS") -}}
{{-   $nightlyId = mozillaInstallHash (joinPath "/" "Applications" "Firefox Nightly.app" "Contents" "MacOS") -}}
{{- else if eq .chezmoi.os "linux" -}}
{{-   $releaseId = mozillaInstallHash (joinPath "/" "usr" "lib" "firefox") -}}
{{-   $nightlyId = mozillaInstallHash (joinPath "/" "opt" "firefox-nightly") -}}
{{- end -}}

[Profile0]
Name=default-release
IsRelative=0
Path={{- $releasePath }}

[Profile1]
Name=default-nightly
IsRelative=0
Path={{- $nightlyPath }}

[General]
StartWithLastProfile=1
Version=2

[Install{{- $releaseId -}}]
Default={{- $releasePath }}
Locked=1

[Install{{- $nightlyId -}}]
Default={{- $nightlyPath }}
Locked=1
