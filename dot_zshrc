# Source global configuration between bash and zsh
if [[ -f "${HOME}/.shrc" ]]; then
    source "${HOME}/.shrc"
fi

# Path to the oh-my-zsh installation.
# Standard installation
if [[ -d "${HOME}/.oh-my-zsh" ]]; then
    export ZSH="${HOME}/.oh-my-zsh"
else
    # ArchLinux oh-my-zsh-git package
    export ZSH="/usr/share/oh-my-zsh"
fi

export ZSH_CACHE_DIR="${HOME}/.cache/zsh"

# Use hyphen-insensitive completion.
# Case sensitive completion must be off. _ and - will be interchangeable.
HYPHEN_INSENSITIVE="true"
# Disable bi-weekly auto-update checks.
DISABLE_AUTO_UPDATE='true'
# Disable marking untracked files under VCS as dirty.
# This makes repository status check for large repositories much, much faster.
DISABLE_UNTRACKED_FILES_DIRTY="true"
# Change the command execution time stamp shown in the history command output.
# The optional three formats: "mm/dd/yyyy"|"dd.mm.yyyy"|"yyyy-mm-dd"
HIST_STAMPS="yyyy-mm-dd"
# Disable auto setting the terminal title.
DISABLE_AUTO_TITLE="true"

plugins=(zsh-syntax-highlighting)

source "${ZSH}/oh-my-zsh.sh"

# kubectl completions
if [[ $commands[kubectl] ]]; then
    source <(kubectl completion zsh)
fi

# Prompt
if command -v starship >/dev/null; then
    eval "$(starship init zsh)"
else
    # export PS1='%n@%m %1~ %# '
    autoload -U colors && colors
    local user_char='$'
    if [[ $UID == 0 || $EUID == 0 ]]; then
        user_char='#'
    fi
    export PS1="%B%{$fg[green]%}%n%{$reset_color%}%B@%{$fg[blue]%}%m%{$reset_color%} %B%{$fg[yellow]%}%~%{$reset_color%} $user_char "
fi
